<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">

    <title>Esempio JSONP con jQuery</title>

     <!-- Inclusione della libreria jQuery -->
     <script src="jquery-3.7.1.js"></script>
    
</head>
<body>
    <h1>Esempio JSONP con jQuery</h1>
    <button id="ajax-button-jsonp">Effettua richiesta</button>
    <div id="resultJsonp"></div>
    
    <h1>Esempio JSON con jQuery</h1>
    <button id="ajax-button-json">Effettua richiesta</button>
    <div id="resultJson"></div>


    <!-- Esempio JSONP con jQuery -->
    <script>
        // Funzione chiamata dalla risposta JSONP con i dati ricevuti
        function handleResponseJsonp(response) {
            console.log(response); // Stampa la risposta nella console
            
            // Mostra il risultato nella pagina HTML
            var resultDiv = document.getElementById("resultJsonp");
            resultDiv.innerHTML = "<h2>Risultato:</h2><pre>" + JSON.stringify(response, null, 2) + "</pre>";
        }

        // Effettua una richiesta AJAX JSONP quando si preme il pulsante
        $('#ajax-button-jsonp').click(function() {
            $.ajax({
                url: 'https://jsonplaceholder.typicode.com/posts/1', // URL dell'API
                dataType: 'jsonp', // Specifica il formato JSONP per superare restrizioni CORS
                jsonpCallback: 'handleResponseJsonp' // Nome della funzione di callback
            });
        });
    </script>
    
    
    <!-- Esempio JSON con jQuery -->
    <script>
        // Effettua una richiesta AJAX JSON quando si preme il pulsante
        $('#ajax-button-json').click(function() {
            $.ajax({
                url: 'https://jsonplaceholder.typicode.com/posts/1', // URL dell'API
                dataType: 'json', // Specifica che il formato Ã¨ JSON
                success: function(response) {
                    console.log(response); // Stampa la risposta nella console
                    
                    // Mostra il risultato nella pagina HTML
                    var resultDiv = document.getElementById("resultJson");
                    resultDiv.innerHTML = "<h2>Risultato:</h2><pre>" + JSON.stringify(response, null, 2) + "</pre>";
                },
                error: function(xhr, status, error) {
                    console.log("Errore: " + error); // Stampa l'errore nella console
                    
                    // Mostra l'errore nella pagina HTML
                    var resultDiv = document.getElementById("resultJson");
                    resultDiv.innerHTML = "<h2>Errore:</h2><p>" + error + "</p>";
                }
            });
        });
    </script>
</body>
</html>